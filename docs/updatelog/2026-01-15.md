# Update Log (2026-01-15)

## Commit
- Pending (working tree only; not committed yet)
- Branch: `dev/createAndPut`

## Summary
Extended the existing MediatR setup from read-only queries to write operations by adding create/edit commands for `Activity`, wiring up AutoMapper for updates, and exposing `POST`/`PUT` endpoints in `ActivitiesController`. Documentation was updated to include request examples and endpoint list updates.

## Changes (High Level)
- API: added `POST /api/activities` and `PUT /api/activities` that delegate to MediatR command handlers.
- API: registered AutoMapper and added the `MappingProfiles` profile.
- Application: added `CreateActivity` (returns created id) and `EditActivity` (updates existing entity via AutoMapper).
- Docs: added MediatR request examples doc; updated repo `README.md` to reflect MediatR/AutoMapper and new endpoints.

## API Changes (Details)
- `API/Controllers/ActivitiesController.cs`
  - Added `CreateActivity(Activity activity)` -> `Mediator.Send(new CreateActivity.Commands { Activity = activity })`
  - Added `EditActivity(Activity activity)` -> `Mediator.Send(new EditActivity.Commands { Activity = activity })` and returns `204 No Content`
- `API/Program.cs`
  - Added AutoMapper registration: `builder.Services.AddAutoMapper(cfg => cfg.AddProfile<MappingProfiles>());`

## Application Changes (Details)
- `Application/Activities/Commands/CreateActivity.cs`
  - `Commands : IRequest<string>` and handler inserts an `Activity` and returns `Activity.Id`.
- `Application/Activities/Commands/EditActivity.cs`
  - `Commands : IRequest` and handler loads existing row, maps updates via `IMapper`, saves changes.
- `Application/Core/MappingProfiles.cs`
  - Added mapping config: `CreateMap<Domain.Activity, Domain.Activity>();`
- `Application/Application.csproj`
  - Added NuGet dependency: `AutoMapper` (`16.0.0`)

## Docs
- Added: `docs/MediatR-Request-Examples.md`
- Updated: `README.md` (stack mentions MediatR/AutoMapper, structure includes `Application/` and `docs/`, endpoints list includes POST/PUT)

## Verification (Manual)
1. Build:
   - `dotnet build API/API.csproj`
2. Run API:
   - `dotnet run --project API/API.csproj`
3. Check endpoints:
   - `GET https://localhost:5001/api/activities`
   - `GET https://localhost:5001/api/activities/{id}`
   - `POST https://localhost:5001/api/activities`
   - `PUT https://localhost:5001/api/activities`

## Notes / Follow-ups
- `EditActivity` assumes the request body includes a valid `id`; missing/not-found currently throws and may surface as `500` without exception mapping.
- Consider returning `201 Created` for POST (with `Location` header) and using DTOs + validation for write endpoints.

